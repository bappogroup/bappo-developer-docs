---
id: custom-view-models
title: $models
---

The prop `$models` is passed to the top-level React component that is used as a
custom view. It is a dictionary of Object Key -> [Object Model](#ObjectModel)
defined in the running app.

For example, if an app has two objects Customer and
Contact, `$models` will have two properties `Customer` and `Contact`, each one
being an [Object Model](#ObjectModel).

# ObjectModel

ORM-style model that can be used to query records of an Object.

## Static Methods

<AUTOGENERATED_TABLE_OF_CONTENTS>

### `bulkCreate()`

**static bulkCreate(records: [RecordObject](#RecordObject)[]): Promise<[ObjectModel](#ObjectModel)[]>**

Create multiple records in the database.

Examples:

```javascript
const newContacts = await $models.Contact.bulkCreate([
  { name: "Alice", email: "a@bappo.com", customer_id: "1" },
  { name: "Bob", email: "b@bappo.com", customer_id: "1" },
  { name: "Charles", email: "c@bappo.com", customer_id: "2" },
]);
```

### `bulkUpdate()`

**static bulkUpdate(recordUpdates: [RecordObject](#RecordObject)[]): Promise\<void>**

Update multiple records in the database. Records are found by matching `id`, so
`id` is required in each `recordUpdate`.

Examples:

```javascript
$models.Contact.bulkUpdate([
  { id: "1", name: "a.new@bappo.com" },
  { id: "2", customer_id: "2" },
]);
```

### `create()`

**static create(record: [RecordObject](#RecordObject)): Promise<[ObjectModel](#ObjectModel)>**

Create a record in the database.

Examples:

```javascript
const newContact = await $models.Contact.create({
  name: "Alice",
  email: "a@bappo.com",
  customer_id: "1",
});
```

### `destroy()`

**static destroy(options?: { where?: [OptionWhere](#OptionWhere) }): Promise\<void>**

Delete records in the database matching a where clause.

Examples:

```javascript
$models.Contact.destroy({
  where: {
    customer_id: "1",
  },
});
```

### `destroyById()`

**static destroyById(recordId: string): Promise\<void>**

Delete a record in the database by id.

Examples:

```javascript
$models.Contact.destroyById("1");
```

### `findAll()`

**static findAll(options?: { attributes?: [OptionAttribute](#OptionAttribute), where?: [OptionWhere](#OptionWhere), include?: [OptionInclude](#OptionInclude)[], page?: [OptionPage](#OptionPage), order?: [OptionOrder](#OptionOrder) }): Promise<[ObjectModel](#ObjectModel)[]>**

Find records in the database matching the query.

Examples:

```javascript
const customers = await $models.Customer.findAll({
  include: [{ as: "contacts" }],
  where: {
    name: "Coles"
  },
  offset: 100,
  limit: 50
  order:[['age','ASC']]
});
```

### `findAndCountAll()`

**static findAndCountAll(options?: { attributes?: [OptionAttribute](#OptionAttribute), where?: [OptionWhere](#OptionWhere), include?: [OptionInclude](#OptionInclude)[], page?: [OptionPage](#OptionPage), order?: [OptionOrder](#OptionOrder) }): Promise<{ records: [ObjectModel](#ObjectModel)[], total: number }>**

Find records in the database matching the query (with offset and limit applied)
and get the total number of records matching the query.

Examples:

```javascript
const { records, total } = await $models.Customer.findAndCountAll({
  include: [{ as: "contacts" }],
  where: {
    name: "Coles",
  },
  offset: 100,
  limit: 50,
  order:[['age','ASC']]
});
```

### `findById()`

**static findById(id: string, options?: { attributes?: [OptionAttribute](#OptionAttribute), include?: [OptionInclude](#OptionInclude)[] }): Promise<[ObjectModel](#ObjectModel)>**

Find a record in the database by id.

Examples:

```javascript
const customer = await $models.Customer.findById("1", {
  include: [{ as: "contacts" }],
});
```

### `findOne()`

**static findOne(options?: { attributes?: [OptionAttribute](#OptionAttribute), where?: [OptionWhere](#OptionWhere), include?: [OptionInclude](#OptionInclude)[] }): Promise<[ObjectModel](#ObjectModel)>**

Find a record in the database matching the query.

Examples:

```javascript
const customer = await $models.Customer.findOne({
  include: [{ as: "contacts" }],
  where: {
    name: "Coles",
  },
});
```

### `update()`

**static update(values: [RecordObject](#RecordObject), options?: { where?: [OptionWhere](#OptionWhere) }): Promise\<void>**

Update records in the database matching the query.

Examples:

```javascript
$models.Contact.update(
  { name: "Bob" },
  {
    where: {
      name: "Alice",
    },
  }
);
```

### `fields` (⚠️ This feature is experimental and will change in the future)

Return all the fields of the object definition.

## Types

### RecordObject: { [fieldName: string]: any }

A RecordObject is an object (key/value pairs) used to represent a full or
partial record. Keys of a RecordObject are Field names of an Object, except for
a Reference Field the key is the Field name + `_id`.

Example:

```javascript
const contactRecordObject = {
  name: "Alice",
  customer_id: "1",
};
```

<a class="anchor" aira-hidden="true" name="optionattribute"></a>

### OptionAttribute: string[]

The `attributes` option lets you specify fields you want to include in the record. `id` will always be included.

<a class="anchor" aira-hidden="true" name="optioninclude"></a>

### OptionInclude: { as: string, include?: [OptionInclude](#OptionInclude)[], where?: [OptionWhere](#OptionWhere) }

The `include` option lets you specify relationships you want to include in the
record.

`as` is the Relationship name. It is required.

You can use nested `include` and `where` to include and filter nested
relationships.

Example:

```javascript
const contactsFromColesNamedAlice = await $models.Contact.findAll({
  where: {
    name: "Alice",
  },
  include: [
    {
      as: "customer",
      where: {
        name: "Coles",
      },
    },
  ],
});
```

<a class="anchor" aira-hidden="true" name="optionwhere"></a>

### OptionWhere

The `where` option lets you filter a query.

#### Basic

```javascript
// Find all contacts of customer 1
$models.Contact.findAll({
  where: {
    customer_id: "1",
  },
});

// Find all contacts whose birthday is in July 1980
$models.Contact.findAll({
  where: {
    birthday: {
      $between: ["1980-07-01", "1980-07-31"],
    },
  },
});
```

#### Operators

|   Operator    |                   Operands                   |           SQL           |
| :-----------: | :------------------------------------------: | :---------------------: |
|    `$and`     |                OptionWhere[]                 |           AND           |
|     `$or`     |                OptionWhere[]                 |           OR            |
|     `$gt`     |             string &#124; number             |            >            |
|    `$gte`     |             string &#124; number             |           >=            |
|     `$lt`     |             string &#124; number             |            <            |
|    `$lte`     |             string &#124; number             |           <=            |
|     `$ne`     |             string &#124; number             |           !=            |
|     `$eq`     |             string &#124; number             |            =            |
|    `$not`     |                   boolean                    |       IS NOT TRUE       |
|  `$between`   | [string &#124; number, string &#124; number] |   BETWEEN _a_ AND _b_   |
| `$notBetween` | [string &#124; number, string &#124; number] | NOT BETWEEN _a_ AND _b_ |
|     `$in`     |           string[] &#124; number[]           |   IN [_a_, _b_, ...]    |
|   `$notIn`    |           string[] &#124; number[]           | NOT IN [_a_, _b_, ...]  |
|   `$iLike`    |                    string                    |          ILIKE          |
|  `$notILike`  |                    string                    |        NOT ILIKE        |

#### Combinations

```javascript
$models.Contact.findAll({
  where: {
    $or: [
      {
        birthday: {
          $between: ["1980-07-01", "1980-07-31"],
        },
      },
      {
        $and: [
          {
            customer_id: "1",
          },
          {
            name: {
              iLike: "alice%",
            },
          },
        ],
      },
    ],
  },
});
```

#### Pagination/Limiting

The `offset` and `limit` options let you do pagination.

Example:

```javascript
// get the 21st - 30th customers
const tenCustomers = await $models.Customer.findAll({
  offset: 20,
  limit: 10,
});
```

### OptionOrder: array[]

The `order` option takes an array of items to order the query. These items are themselves in the form [column, direction]. The column will be escaped correctly and the direction will be checked in a whitelist of valid directions (such as ASC, DESC, NULLS FIRST).

Example: 
```javascript
// find all customers sorted by name ascending first, then ordered by their age descending if share the same name.
const tenCustomers = await $models.Customer.findAll({
  order: [[name, 'ASC'], [age, 'DESC']]
});
```
