---
id: custom-view-popup
title: $popup
---

The prop `$popup` is passed to the top-level React component that is used as a
custom view. It can be used to interact with forms and popups.

## Methods

<AUTOGENERATED_TABLE_OF_CONTENTS>

---

# Reference

## Methods

### `form()`

**static form(options: [UserDefinedFormOptions](#UserDefinedFormOptions) | [CustomFormOptions](#CustomFormOptions))**

Open a user-defined Form or a custom form on-the-fly.

User-defined form examples:

```javascript
// Open user-defined form
$popup.form({
  formKey: 'ContactForm',
  async onSubmit(contact) {
    await $models.Contact.create(contact);
  },
});
```

Custom form examples:

```javascript
// Open a form with database fields from one Object
$popup.form({
  objectKey: 'Contact',
  fields: ['name', 'email'],
});

// Overwrite database field config
$popup.form({
  objectKey: 'Contact',
  fields: [
    {
      path: 'name', // DB field name, required
      label: 'Contact Name',
      validate(value) {
        if (value && value.length > 3) {
          return; // validation passed
        }
        // error message
        return 'Contact name must be more than 3 characters long';
      },
    },
  ],
});

// Use generic input fields (not in database)
$popup.form({
  fields: [
    {
      name: 'favouriteFruit', // field name, required for generic input
      type: 'FixedList', // field type, required
      properties: {
        // field properties, required
        options: [
          { id: '1', label: 'Apple' },
          { id: '2', label: 'Banana' },
          { id: '3', label: 'Orange' },
        ],
      },
      label: 'Your Favourite Fruit',
    },
  ],
  onSubmit({ favouriteFruit }) {
    console.log('Your favourite fruit is ', favouriteFruit);
  },
});
```

### `open()`

**static form(component, options: [PageOptions](#PageOptions))**

Opens any react component in a popup.

Example:

```javascript
$popup.open(<div>hello</div>, {
  style: {
    // Both infinity to full screen
    width: Infinity,
    height: Infinity,
  },
  title: 'Hello',
});
```

## Types

### CommonFormOptions

|   Property    |                               Type                               | Required | Description                                             |
| :-----------: | :--------------------------------------------------------------: | :------: | ------------------------------------------------------- |
| initialValues |         [RecordObject](custom-view-models#RecordObject)          |    No    | Field initial values when form is opened                |
|   onSumbit    | (values: [RecordObject](custom-view-models#RecordObject)) => any |   Yes    | Callback function that is called when form is submitted |
|     title     |                              string                              |    No    | Form title                                              |

### UserDefinedFormOptions

All properties in [CommonFormOptions](#CommonFormOptions) plus the table below:

| Property |  Type  | Required | Description |
| :------: | :----: | :------: | ----------- |
| formKey  | string |   Yes    | Form key    |

### CustomFormOptions

All properties in [CommonFormOptions](#CommonFormOptions) plus the table below:

| Property  |                 Type                  | Required | Description              |
| :-------: | :-----------------------------------: | :------: | ------------------------ |
|  fields   | [FormFieldConfig](#FormFieldConfig)[] |   Yes    | Field configurations     |
| objectKey |                string                 |    No    | Object key of all fields |

### FormFieldConfig

|  Property  |                Type                 |   Field Type   |      Required      | Description                                                                             |
| :--------: | :---------------------------------: | :------------: | :----------------: | --------------------------------------------------------------------------------------- |
|    name    |               string                |      Any       | If a generic field | Name that appears in the object passed to `onSubmit`                                    |
|   label    |               string                |      Any       |         No         | Field label                                                                             |
|  readOnly  |               boolean               |      Any       |         No         | Field is read-only                                                                      |
|  validate  |          value => ?string           |      Any       |         No         | Validation function. Return an error message string or `undefined` if validation passes |
|    path    |               string                | Database Field |        Yes         | DB Field name                                                                           |
|    type    |       [FieldType](#FieldType)       | Generic Field  |        Yes         | Field type                                                                              |
| properties | [FieldProperties](#FieldProperties) | Generic Field  |        Yes         | Field properties                                                                        |

### PageOptions

| Property |  Type  | Required | Description                                                                                                      |
| :------: | :----: | :------: | ---------------------------------------------------------------------------------------------------------------- |
|  style   | object |    No    | Controls width and height of the popup. Values are numbers in pixel, or 'Infinity' to make the popup fullscreen. |
|  title   | string |    No    | Popup title                                                                                                      |
